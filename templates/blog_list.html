{% extends "base.html" %}

{% block body %}
<!-- begin post box -->

  {% if query and posts_with_tags %}
  <p class="title is-3">Search results for {{ query }} </p>
  {% elif query and not posts_with_tags %}
  <p class="title is-3">No search results for {{ query }} :( </p>
  {% endif %}

  {% for post,tags in posts_with_tags%}
      <div class="box blog-post-card"}>
        <span class="content is-pulled-right blog-post-card-icons">
          {% if current_user.admin %}
         <a class="icon" href="{{ url_for('admin_edit_post', pid=post.id) }}">
            <i class="fa fa-pencil"></i>
          </a>
          {% endif %}
        </span>

        {% if not post.published %}
            <div class="has-text-warning has-text-centered is-size-4" style="position:relative; top: calc(-1.5rem + 0.1875em); margin-bottom:calc(-1.5rem + 2 * 0.1875em); " ><b>%%%%%%%%%% Not yet published! %%%%%%%%%%</b> </div>
        {% endif %}

        <div class="post-heading">
            <a href="{{ url_for('post', pid=post.id, slug=post.slug) }}">{{ post.title }}</a>
        </div>



      <!--    <div class="post-subheading">
              <nav class="level">
                  <div class="level-left">
                      <span class="level-item">
                          <i class="fa fa-clock-o"></i> Posted on
                      </span>
                  </div>
              </nav>
          </div> -->

        <span class="content post-content">
          {{ post.content }}
        </span>
          <nav class="level tag-bar">
              <div class="level-left">
                  <!--
                  <span class="icon is-small level-item">
                      <i class="fa fa-tags"></i>
                  </span>
                  -->
              </div>

              <div class="level-right">
                  {% for tag in tags %}
                  <a href="{{ url_for('tag_view', tag_name=tag.name) }}" class="level-item tag is-primary post-tag">
                      {{ tag.name }}
                  </a>
                  {% endfor %}
              </div>
          </nav>
    </div>


  {% else %}
  <div class="container" style="flex:1; display:flex; flex-flow: column; justify-content: center;">
    <div class="content has-text-centered">
          <h1 class="title">Nothing to see here</h1>
    </div>
  </div>
  {% endfor %}

  {% if pages %}
    <nav class="pagination is-centered" role="navigation" aria-label="pagination" style="margin-top: auto;">
    <a class="button pagination-previous" {% if pages.has_prev %} href="{% block pagination_previous_link %}{% endblock %}" {% else %} disabled="disabled" {% endif %}>
        Newer
    </a>
    <a class="button pagination-next " {% if pages.has_next %} href="{% block pagination_next_link %}{% endblock %}" {% else %} disabled="disabled" {% endif %}>
      Older
    </a>
    <ul class="pagination-list">
        {% for page in pages.elements %}
        <li>
            <a class="button pagination-link {% if page.number == pages.page %} is-primary {% endif %}" href="{% block pagination_link scoped %}{% endblock %}">{{ page }}</a>
        </li>
        {% endfor %}
    </ul>
</nav>

  {% endif %}

  <!-- end post box -->

{% endblock %}
