(function(){var paginationList=document.getElementsByClassName("pagination")[0];if(List.matchingItems.length<List.page){paginationList.classList.add("is-invisible")}var searchField=document.getElementById("list-search-field");searchField.onkeyup=function(){var searchString=this.value;List.search(searchString)};var activeRow=null;var activeRowId=null;(function(){var clickHandler=function(){var row=this;var activeClassName="list-row-active";if(activeRow){if(row.classList)activeRow.classList.remove(activeClassName);else activeRow.className=activeRow.className.replace(new RegExp("(^|\\b)"+activeClassName.split(" ").join("|")+"(\\b|$)","gi")," ")}if(row.classList)row.classList.add(activeClassName);else row.className+=" "+activeClassName;var id=row.querySelectorAll("."+listType+"-id")[0].innerHTML;activeRow=row;activeRowId=id.trim()};var clickHandlerAdder=function(){var rows=document.getElementsByClassName(listType+"-row");for(var i=0;i<rows.length;i++){var current=rows[i];current.addEventListener("click",clickHandler,false)}};clickHandlerAdder();var paginationLinks=paginationList.children;for(var i=0;i<paginationLinks.length;i++){paginationLinks[i].addEventListener("click",clickHandlerAdder)}})();(function(){var clickHandler=function(){if(activeRowId){if(confirm("Are you sure you want to delete "+listType+" "+activeRowId+"?")){var url="/admin/"+listType+"s"+"/delete";var data={id:activeRowId};var httpRequest=new XMLHttpRequest;httpRequest.open("POST",url);httpRequest.setRequestHeader("Content-Type","application/json");httpRequest.onload=function(){if(JSON.parse(httpRequest.response)["ok"]===true){List.remove(listType+"-id",activeRowId);List.update()}else{location.reload(true)}};httpRequest.onerror=function(){alert("Delete request contained an error")};httpRequest.send(JSON.stringify(data))}}else{alert("Select a "+listType+" delete.")}};var anchor=document.getElementById("action-delete-"+listType);anchor.addEventListener("click",clickHandler,false)})();(function(){var clickHandler=function(){if(activeRowId){var url="/admin/"+listType+"s"+"/edit/"+activeRowId;window.location=url}else{alert("Select a "+listType+" to edit!")}};var anchor=document.getElementById("action-edit-"+listType);anchor.addEventListener("click",clickHandler,false)})();(function(){var clickHandler=function(){if(activeRowId){var row=document.getElementsByClassName("list-row-active")[0];var nameColumnRow=row.querySelectorAll("."+listType+"-name")[0];var name=nameColumnRow.getAttribute("data-name").trim();var url="/"+listType+"/"+name;window.location=url}else{alert("Select a "+listType+" to choose!")}};var anchor=document.getElementById("action-show-post-of-"+listType);if(typeof anchor!="undefined"&&anchor!=null){anchor.addEventListener("click",clickHandler,false)}})()})();