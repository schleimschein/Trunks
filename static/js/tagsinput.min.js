var $jscomp={scope:{},owns:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var f in e)$jscomp.owns(e,f)&&(a[f]=e[f])}return a}},"es6-impl","es3");
var KEY_BACKSPACE=8,KEY_TAB=9,KEY_ENTER=13,KEY_LEFT=37,KEY_RIGHT=39,KEY_DELETE=46,KEY_COMMA=188,Tagify=function(a,b){b=void 0===b?{}:b;this.element=a;this.options=Object.assign({},{disabled:!1,delimiter:",",allowDelete:!0,lowercase:!1,uppercase:!1,duplicates:!0},b);this.init()};
Tagify.prototype.init=function(){if(!this.options.disabled){this.tags=[];this.container=document.createElement("div");this.container.className="tagsinput";this.container.classList.add("field");this.container.classList.add("is-grouped");this.container.classList.add("is-grouped-multiline");this.container.classList.add("input");var a=this.element.getAttribute("type");a&&"tags"!==a||(a="text");this.input=document.createElement("input");this.input.className="input";this.input.setAttribute("type",a);this.container.appendChild(this.input);
a=this.element.nextSibling;this.element.parentNode[a?"insertBefore":"appendChild"](this.container,a);this.element.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;opacity:0.01;";this.element.tabIndex=-1;this.enable()}};
Tagify.prototype.enable=function(){var a=this;this.enabled||this.options.disabled||(this.element.addEventListener("focus",function(){a.container.classList.add("is-focused");a.select(Array.prototype.slice.call(a.container.querySelectorAll(".tag:not(.is-delete)")).pop())}),this.input.addEventListener("focus",function(){a.container.classList.add("is-focused");a.select(Array.prototype.slice.call(a.container.querySelectorAll(".tag:not(.is-delete)")).pop())}),this.input.addEventListener("blur",function(){a.container.classList.remove("is-focused");
a.select(Array.prototype.slice.call(a.container.querySelectorAll(".tag:not(.is-delete)")).pop());a.savePartial()}),this.input.addEventListener("keydown",function(b){var c=b.charCode||b.keyCode||b.which,d,e=a.container.querySelector(".tag.is-active"),f=Array.prototype.slice.call(a.container.querySelectorAll(".tag:not(.is-delete)")).pop(),g=a.caretAtStart(a.input);e&&(d=a.container.querySelector('[data-tag="'+e.innerHTML.trim()+'"]'));a.setInputWidth();if(c===KEY_ENTER||c===a.options.delimiter.charCodeAt(0)||
c===KEY_COMMA||c===KEY_TAB){if(!a.input.value&&(c!==a.options.delimiter.charCodeAt(0)||c===KEY_COMMA))return;a.savePartial()}else if(c===KEY_DELETE&&d)d.nextSibling?a.select(d.nextSibling.querySelector(".tag")):d.previousSibling&&a.select(d.previousSibling.querySelector(".tag")),a.container.removeChild(d),delete a.tags[a.tags.indexOf(d.getAttribute("data-tag"))],a.setInputWidth(),a.save();else if(c===KEY_BACKSPACE)if(d)d.previousSibling?a.select(d.previousSibling.querySelector(".tag")):d.nextSibling&&
a.select(d.nextSibling.querySelector(".tag")),a.container.removeChild(d),delete a.tags[a.tags.indexOf(d.getAttribute("data-tag"))],a.setInputWidth(),a.save();else if(f&&g)a.select(f);else return;else if(c===KEY_LEFT)if(d)d.previousSibling&&a.select(d.previousSibling.querySelector(".tag"));else if(g)a.select(f);else return;else if(c===KEY_RIGHT){if(!d)return;a.select(d.nextSibling.querySelector(".tag"))}else return a.select();b.preventDefault();return!1}),this.input.addEventListener("input",function(){a.element.value=
a.getValue();a.element.dispatchEvent(new Event("input"))}),this.input.addEventListener("paste",function(){return setTimeout(savePartial,0)}),this.container.addEventListener("mousedown",function(b){a.refocus(b)}),this.container.addEventListener("touchstart",function(b){a.refocus(b)}),this.savePartial(this.element.value),this.enabled=!0)};Tagify.prototype.disable=function(){this.enabled&&!this.options.disabled&&(this.reset(),this.enabled=!1)};
Tagify.prototype.select=function(a){var b=this.container.querySelector(".is-active");b&&b.classList.remove("is-active");a&&a.classList.add("is-active")};
Tagify.prototype.addTag=function(a){var b=this;~a.indexOf(this.options.delimiter)&&(a=a.split(this.options.delimiter));if(Array.isArray(a))return a.forEach(function(a){b.addTag(a)});var c=a&&a.trim();if(!c)return!1;if(this.element.getAttribute("lowercase")||"true"==this.options.lowercase)c=c.toLowerCase();if(this.element.getAttribute("uppercase")||"true"==this.options.uppercase)c=c.toUpperCase();if("true"==this.element.getAttribute("duplicates")||this.options.duplicates||-1===this.tags.indexOf(c)){this.tags.push(c);
a=document.createElement("div");a.className="control";a.setAttribute("data-tag",c);var d=document.createElement("div");d.className="tags";d.classList.add("has-addons");var e=document.createElement("span");e.className="tag";e.classList.add("is-active");this.select(e);e.innerHTML=c;d.appendChild(e);this.options.allowDelete&&(c=document.createElement("a"),c.className="tag",c.classList.add("is-delete"),c.addEventListener("click",function(a){var c;a=a.target.parentNode;var d=Array.prototype.slice.call(b.container.querySelectorAll(".tag")).pop(),
e=b.caretAtStart(b.input);a&&(c=b.container.querySelector('[data-tag="'+a.innerText.trim()+'"]'));c?(b.select(c.previousSibling),b.container.removeChild(c),delete b.tags[b.tags.indexOf(c.getAttribute("data-tag"))],b.setInputWidth(),b.save()):d&&e&&b.select(d)}),d.appendChild(c));a.appendChild(d);this.container.insertBefore(a,this.input)}};Tagify.prototype.getValue=function(){return this.tags.join(this.options.delimiter)};
Tagify.prototype.setValue=function(a){var b=this;Array.prototype.slice.call(this.container.querySelectorAll(".tag")).forEach(function(a){delete b.tags[b.tags.indexOf(a.innerHTML)];b.container.removeChild(a)});this.savePartial(a)};
Tagify.prototype.setInputWidth=function(){var a=Array.prototype.slice.call(this.container.querySelectorAll(".control")).pop();this.container.offsetWidth&&(this.input.style.width=Math.max(this.container.offsetWidth-(a?a.offsetLeft+a.offsetWidth:30)-30,this.container.offsetWidth/4)+"px")};Tagify.prototype.savePartial=function(a){"string"===typeof a||Array.isArray(a)||(a=this.input.value);!1!==this.addTag(a)&&(this.input.value="",this.save(),this.setInputWidth())};
Tagify.prototype.save=function(){this.element.value=this.tags.join(this.options.delimiter);this.element.dispatchEvent(new Event("change"))};Tagify.prototype.caretAtStart=function(a){try{return 0===a.selectionStart&&0===a.selectionEnd}catch(b){return""===a.value}};Tagify.prototype.refocus=function(a){a.target.classList.contains("tag")&&this.select(a.target);if(a.target===this.input)return this.select();this.input.focus();a.preventDefault();return!1};Tagify.prototype.reset=function(){this.tags=[]};
Tagify.prototype.destroy=function(){this.disable();this.reset();this.element=null};var tagInputs=document.querySelectorAll('input[type="tags"]');tagInputs&&tagInputs.forEach(function(a){new Tagify(a)});
